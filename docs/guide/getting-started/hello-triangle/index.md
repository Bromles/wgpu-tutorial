---
prev:
  text: "Инициализация wgpu"
  link: "/guide/getting-started/init-wgpu"
next:
  text: "Шейдеры"
  link: "/guide/getting-started/shaders"
---

# Первый треугольник


<<< @/../code/guide/getting-started/hello-triangle/src/main.rs#renderer-new-surface-config

Получаем доступные возможности нашей поверхности, которые исходят из возможностей переданного адаптера

Далее нам нужно определиться с форматом кадров, которые мы будем выводить на поверхность, то есть в окно. На данный момент мы просто можем взять поддерживаемый список форматов поверхности, попытаться выбрать формат с поддержкой `SRGB`, и взять первый попавшийся, если такого не нашлось.

В реальном приложении вы, скорее всего, захотите организовать здесь более сложную логику выбора формата.

Теперь, получив подходящий формат поверхности, мы можем создать объект ее конфигурации `SurfaceConfiguration`:

- `usage` - как мы будем использовать эту поверхность. На самом деле это параметр текстуры, поскольку отрисовку мы производим именно в нее. Но эта текстура находится в поверхности, поэтому данный параметр задается здесь. Выбираем `RENDER_ATTACHMENT`, то есть указываем, что данная текстура в поверхности будет использоваться как цель рендера, в нее будет выводиться полученная картинка.э
- `format` - полученный нами формат поверхности
- `width` - ширина поверхности. Передаем вычисленное ранее значение
- `height` - высота поверхности. Передаем вычисленное ранее значение
- `present_mode` - режим отображения кадров на поверхности. Режимов достаточно много, и разные устройства поддерживают разные режимы. Но wgpu сильно облегчает нам здесь жизнь, предоставляя опции `AutoVsync` и `AutoNoVsync`. Эти опции будут перебирать разные режимы отображения, пока не наткнутся на первый поддерживаемый нашим устройством. Различие между ними, соответственно, в наличии или отсутствии вертикальной синхронизации, то есть ограничения частоты вывода кадров частотой монитора.
- `desired_maximum_frame_latency` - число кадров, которое может одновременно ожидать вывода на экран. Обычно указывается от 1 до 3, но может быть и больше. Не может быть меньше 1. Слишком низкое значение может привести к простою GPU, которой просто некуда будет отдавать готовый кадр, если поверхность не успевает их отрисовывать. По-умолчанию принято ставить 2, как оптимальное значение для большинства случаев.
- `alpha_mode` - режим альфа-канала, отвечающего за прозрачность цветов. В данном случае выбираем автоматическое определение на основании поддерживаемого
- `view_formats` - форматы представлений текстур, которые будут поддерживаться данной поверхностью для рендера. Собственный формат поверхности поддерживается всегда, поэтому нет нужды что-либо туда передавать.
